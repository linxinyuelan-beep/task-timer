# 菜单栏功能说明

## 新增功能概览

已为 Task Timer 应用添加了完整的菜单栏图标和功能菜单，现在可以通过菜单栏方便地控制应用的各种功能。

## 菜单项说明

### 📍 基本功能
- **显示/隐藏窗口** (⌘T)
  - 快速切换浮动窗口的显示/隐藏状态
  - 窗口隐藏后可通过菜单栏图标重新打开

### 🎨 视图模式
- **轻量化模式** (⌘L)
  - 切换到精简视图（无标题栏、更小尺寸）
  - 适合需要最小化干扰的场景
  - 显示当前时间和第一个未完成任务
  - 轻量化模式下尺寸：280 x 200
  - 正常模式尺寸：350 x 500

### 🌓 主题设置
可在以下三种主题中切换：
- **亮色主题** - 明亮的界面配色
- **暗色主题** - 深色的界面配色
- **跟随系统** - 自动跟随 macOS 系统设置（默认）

### 🔍 不透明度调节
提供四档不透明度选项：
- 100% - 完全不透明
- 90% - 轻微透明
- 80% - 中等透明
- 70% - 较高透明度

### ⚙️ 其他功能
- **设置** (⌘,)
  - 打开设置窗口（开发中）
- **关于 Task Timer**
  - 显示应用版本和信息
- **退出** (⌘Q)
  - 完全退出应用程序

## 实现细节

### 技术特点
1. **动态菜单更新**
   - 菜单状态实时反映当前应用状态
   - 使用 NSMenuDelegate 在菜单打开前更新内容
   - 复选标记显示当前选中的主题和模式

2. **状态持久化**
   - 所有设置自动保存到 UserDefaults
   - 下次启动时恢复上次的设置
   - 包括主题、不透明度、视图模式等

3. **窗口管理**
   - 轻量化模式切换时平滑过渡动画
   - 不透明度实时应用到窗口
   - 主题切换使用 NSAppearance

4. **菜单栏图标**
   - 使用 SF Symbol "timer" 图标
   - 始终显示在系统菜单栏右侧
   - 应用设置为 `.accessory` 模式（不显示 Dock 图标）

## 使用建议

- **日常使用**：正常模式 + 跟随系统主题
- **专注工作**：轻量化模式 + 70-80% 不透明度
- **演示场景**：正常模式 + 100% 不透明度
- **夜间使用**：暗色主题 + 90% 不透明度

## 快捷键汇总

| 功能 | 快捷键 |
|------|--------|
| 显示/隐藏窗口 | ⌘T |
| 轻量化模式 | ⌘L |
| 设置 | ⌘, |
| 退出 | ⌘Q |

## 后续计划

- [ ] 完善设置窗口界面
- [ ] 添加自定义不透明度滑块
- [ ] 支持自定义窗口位置保存
- [ ] 添加更多键盘快捷键
- [ ] 支持自定义主题配色
